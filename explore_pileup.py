import pysam
samfile = pysam.AlignmentFile("/Users/siakhnin/data/giab/RMNISTHS_30xdownsample_9999999_10100000.minimap_2.sorted.bam", "rb")
mp = samfile.pileup(contig="20",start=10098785,end=10099190, truncate=False)
names = []
for rec in mp:
    if rec.pos == 10098785:
        for read in rec.pileups:
            if not read.is_del and not read.is_refskip:
                names.append(read.alignment.query_name)
                print("{} {}".format(read.alignment.query_name, read.alignment.query_sequence[read.query_position]))
print(names)

x = [u'HISEQ1:12:H8GVUADXX:1:1211:19839:34971', u'HISEQ1:13:H8G92ADXX:2:2102:2780:19165', u'HWI-D00360:6:H81VLADXX:1:1204:5387:58054', u'HWI-D00360:6:H81VLADXX:1:2205:5234:39341', u'HWI-D00360:8:H88U0ADXX:1:1112:1420:59258', u'HWI-D00360:8:H88U0ADXX:2:1111:6371:7953', u'HWI-D00360:8:H88U0ADXX:2:1215:10221:70408', u'HWI-D00360:8:H88U0ADXX:2:2216:21164:82443']


y = [u'HISEQ1:11:H8GV6ADXX:1:1110:9483:49701',
     u'HWI-D00360:5:H814YADXX:1:2208:1129:93747',
     u'HWI-D00360:8:H88U0ADXX:2:1111:6371:7953',
     u'HWI-D00360:5:H814YADXX:1:1213:19452:64030',
     u'HWI-D00360:5:H814YADXX:1:1209:12208:98620',
     u'HISEQ1:13:H8G92ADXX:2:2102:2780:19165',
     u'HISEQ1:12:H8GVUADXX:1:2206:11424:59322',
     u'HWI-D00360:8:H88U0ADXX:2:1208:10699:74467',
     u'HWI-D00360:8:H88U0ADXX:2:1215:10221:70408',
     u'HISEQ1:9:H8962ADXX:2:1108:6208:16687',
     u'HWI-D00360:6:H81VLADXX:1:1204:5387:58054',
     u'HISEQ1:9:H8962ADXX:2:2108:9624:93936',
     u'HWI-D00360:7:H88WKADXX:1:2202:6276:57737',
     u'HWI-D00360:8:H88U0ADXX:1:1112:1420:59258',
     u'HWI-D00360:6:H81VLADXX:1:2205:5234:39341',
     u'HWI-D00360:7:H88WKADXX:2:1208:19783:4676',
     u'HISEQ1:12:H8GVUADXX:1:1211:19839:34971',
     u'HWI-D00360:8:H88U0ADXX:2:2216:21164:82443']

z = [u'HISEQ1:11:H8GV6ADXX:1:1110:9483:49701',
     u'HWI-D00360:5:H814YADXX:1:2208:1129:93747',
     u'HWI-D00360:5:H814YADXX:1:1213:19452:64030',
     u'HWI-D00360:5:H814YADXX:1:1209:12208:98620',
     u'HISEQ1:12:H8GVUADXX:1:2206:11424:59322',
     u'HWI-D00360:8:H88U0ADXX:2:1208:10699:74467',
     u'HISEQ1:9:H8962ADXX:2:1108:6208:16687',
     u'HISEQ1:9:H8962ADXX:2:2108:9624:93936',
     u'HWI-D00360:7:H88WKADXX:1:2202:6276:57737',
     u'HWI-D00360:7:H88WKADXX:2:1208:19783:4676']
